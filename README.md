# eco395m-final-project-recommendation-system
## Introduction
## A. Data Scraping
## B. Recommendation System Pipline
***Filtering:***
We develop a module that filters products based on user inputs for category and price range by executing SQL queries on our `product_info` database, performing an inner join with the `product_reviews` database on `productid`. This process generates an initial dataframe that includes product information along with each product's corresponding reviews and the reviewers' information. Because users may also specify wanted ingredients and unwanteded ingredients, we filter products that include the wanted ingredients and exclude the unwanted ingredients. To make the subsequent embedding comparison process more efficient, we select the reviews based on the user's input for skin type and skin tone. If a product has reviewers whose skin type and skin tone match the user's inputs, only those matching reviews are retained in the dataframe. If no such matches are found, all reviews for that product are kept as data for further analysis. Through the above steps, we obtain a cleaned dataframe that serves as the data for the next stage of analysis.
| Category  | Brand Name | Display Name                                         | Hero Image                                                                                     | Product ID | Ingredient Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | List Price | Review Text                                                                                                                                                                                             | Skin Tone | Skin Type   |
|-----------|------------|-----------------------------------------------------|------------------------------------------------------------------------------------------------|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|-------------|
| concealer | tarte      | Maracuja Creaseless Creamy Concealer                | https://www.sephora.com/productimages/sku/s2772853-main-zoom.jpg?imwidth=270                  | P512243    | -cloudberry: rich in vitamin c and omegas 3 and 6 to visibly plump and brighten.<br>-diamond powder: helps blur imperfections.<br>-maracuja oil: rich in essential fatty acids and vitamin c for firmer- and brighter-looking skin.<br>water/aqua/eau, cyclopentasiloxane, glycerin, polymethylsilsesquioxane, peg-9 polydimethylsiloxyethyl dimethicone, caprylic/capric triglyceride, caprylyl methicone... | 30.0       | I love a good creamy concealer and this is just that! I love how easily it blends yet keeps the coverage. It truly is creaseless I wore it all day and night with a light powder on top and didnâ€™t have any problem with it settling into my fine lines. The shade range is perfect I really appreciate that I was able to find my skin tone easily. I highly recommend if you like a concealer that is blendable, buildable coverage, and has a great longevity! | medium    | combination |
| concealer | HUDA BEAUTY| #FauxFilter Matte Buildable Coverage Waterproof Concealer | https://www.sephora.com/productimages/sku/s2577781-main-zoom.jpg?imwidth=270&pb=allure-2024-bestofbeauty | P500309    | -vitamin e and sweet almond oil: condition and care for the delicate under-eye skin.<br>water/aqua/eau, cyclopentasiloxane, talc, propanediol, dimethicone, phenyl trimethicone, trimethylsiloxysilicate, lauryl peg-9 polydimethylsiloxyethyl dimethicone, phenylisopropyl dimethicone, caprylyl methicone, hdi/trimethylol hexyllactone crosspolymer, c20-24 alkyl dimethicone, synthetic fluorphlogopite, prunus amygdalus dulcis (sweet almond) oil, tocopherol, tocopheryl acetate, ethylhexylglycerin, sodium chloride, aluminum hydroxide, hydrogen dimethicone, isododecane, dimethicone crosspolymer, sodium gluconate, dimethicone/peg-10/15 crosspolymer, disteardimonium hectorite, silica, tin oxide, phenoxyethanol, iron oxides/ci 77491, iron oxides/ci 77492, iron oxides/ci 77499, titanium dioxide/ci 77891. | 31.0       | Perfect coverage - smooth texture. I love how this feels on my skin and often use it as foundation. Color match is amazing (I have golden/yellow undertones)! | medium    | combination |
| concealer | tarte      | Maracuja Creaseless Full Coverage Concealer         | https://www.sephora.com/productimages/sku/s2094548-main-zoom.jpg?imwidth=270                  | P433206    | -maracuja: rich in essential fatty acids and vitamin c for firmer, brighter, smoother-looking skin, and exceptional hydration.<br>-vitamin c: provides antioxidant benefits and fights free radicals to diminish visible premature signs of aging, while brightening skin.<br>-vitamin e: a natural preservative that also acts as an emollient and antioxidant.<br>-mineral pigments: soothe and soften skin.<br><br><b>61h espresso, 60n mahogany, 57s rich sand, 55h rich honey, 52s deep sand, 45s tan-deep sand, 43n tan-deep neutral, 36b medium-tan beige, 40s tan sand, 34g medium golden, 34h medium honey, 22h light honey, 20b light beige, 10b fair beige, 8s porcelain sand, 10n fair, 20n light, 25h light-medium, 33n medium, 40n tan, 43h tan-deep, 50h deep, 13n fair-light neutral, 20s light sand, 25s light-medium sand, 32n medium neutral, 32s medium sand, 25n light-medium neutral, 56n rich, 20n light, 33n medium, 40n tan:</b><br>caprylic/capric triglyceride, bis-diglyceryl polyacyladipate-2, cetyl alcohol, vp/hexadecene copolymer, silica dimethyl silylate, microcrystalline wax/cera microcristallina/cire microcristalline, tocopheryl acetate, phenoxyethanol, caprylyl glycol, ascorbyl palmitate, passiflora edulis seed oil, tocopherol. (+/-): titanium dioxide (ci 77891), iron oxides (ci 77492, ci 77491, ci 77499), yellow 5 lake (ci 19140). | 30.0       | This maracuja greaseless concealer is the real deal. It covers up my skin imperfections so incredibly well. The application brush is perfect to use on my skin and for under eye area. I am loving how well it works! | medium    | combination |


***User Interface:*** 
We design an interactive dashboard in Python using Streamlit for users to select with their preference and get the best fit product from our recommendation system. Make sure you upload your data to Google Cloud Platform with the instance started and have your database credentials in the hidden .env file. Everything is being connected through the [dashboard.py](code/recommendation_system/dashboard.py) file by local modules and there is nothing else you need to run separately for queries or models. To open up the Streamlit dashboard, run the following command from the root:
```bash
streamlit run code/recommendation_system/dashboard.py 
```
Some dashboard highlights are as follows:

1. Users can select a product category, specify a desired price range, choose a skin tone and skin type, and provide a short description of their desired product. They may also optionally input wanted and unwanted ingredients.
2. All filters must be completed for users to proceed to the recommendation step. If any required filter is missing, a warning message will be displayed.
3. Based on the user's selections, SQL queries will be executed to search the database for products that meet all the specified criteria. If no matching products are found, users will be prompted to modify their selections.
4. If products meeting the initial requirements are found, their details, along with the user's description, will be sent to our embedding model for further recommendations. 
5. The dashboard will display the top 5 recommended products, including their names and clickable links that direct users to the corresponding product pages on Sephora.

## C. Findings
## D. Limitations
## E. Further Plans
